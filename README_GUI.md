# PKU自动选课程序 - 图形化界面使用说明

## 简介

这是PKU自动选课程序的PyQt6图形化界面版本，提供了友好的用户界面来配置和运行自动选课程序。

## 功能特性

### 主界面
- **状态显示**: 显示程序运行状态
- **控制按钮**: 启动/停止自动选课程序
- **标签页界面**: 设置、日志等功能的分类管理

### 设置界面
- **用户设置**: 学号、密码、双学位、身份等
- **客户端设置**: 刷新间隔、超时时间、连接池等参数
- **监控设置**: 监控主机和端口配置
- **通知设置**: 推送开关、微信Token等
- **API密钥**: 验证码识别相关配置
- **课程设置**: 课程信息配置和管理

### 日志界面
- **实时日志**: 显示程序运行日志
- **日志管理**: 清空、保存日志功能

## 安装要求

### 系统要求
- Windows 10/11 或 Linux 或 macOS
- Python 3.7+

### 依赖安装
```bash
pip install -r requirements.txt
```

或者单独安装PyQt6：
```bash
pip install PyQt6
```

## 使用方法

### 1. 启动程序
```bash
python run_gui.py
```

或者直接运行：
```bash
python gui_main.py
```

### 2. 配置设置
1. 点击"设置"标签页
2. 在各个子标签页中填写相应配置
3. 点击"保存所有设置"按钮保存配置

### 3. 运行程序
1. 确保配置已正确设置
2. 点击"启动选课"按钮
3. 程序开始运行，状态显示"运行中"
4. 可以切换到"日志"标签页查看运行状态

### 4. 停止程序
- 点击"停止选课"按钮停止程序
- 关闭窗口时会提示确认退出

## 配置文件说明

### config.ini
主配置文件，包含以下主要部分：

- `[user]`: 用户信息
- `[client]`: 客户端参数
- `[monitor]`: 监控设置
- `[notification]`: 通知设置
- `[course:课程ID]`: 课程配置
- `[mutex:互斥ID]`: 课程互斥规则
- `[delay:延迟ID]`: 延迟选课规则

### apikey.json
API密钥配置文件：
```json
{
    "username": "用户名",
    "password": "密码",
    "RecognitionTypeid": "1003"
}
```

## 配置模板

程序提供了配置文件模板：
- `config.ini.template`: 配置文件模板
- `apikey.json.template`: API密钥文件模板

首次使用时，可以复制这些模板文件并重命名，然后填写相应的配置信息。

## 注意事项

1. **首次使用**: 请先配置好用户信息和课程信息
2. **密码安全**: 密码会明文保存在配置文件中，请注意文件安全
3. **网络连接**: 确保网络连接正常，能够访问PKU相关网站
4. **权限问题**: 某些功能可能需要管理员权限

## 故障排除

### 常见问题

1. **PyQt6安装失败**
   - 尝试使用国内镜像源：`pip install PyQt6 -i https://pypi.tuna.tsinghua.edu.cn/simple/`

2. **程序无法启动**
   - 检查Python版本是否兼容
   - 确认所有依赖已正确安装

3. **配置保存失败**
   - 检查文件权限
   - 确认文件路径正确

4. **程序运行异常**
   - 查看日志信息
   - 检查配置文件格式是否正确

## 技术支持

如果遇到问题，请：
1. 查看程序日志输出
2. 检查配置文件格式
3. 确认网络连接正常
4. 参考原命令行版本的说明文档

## 更新日志

- v1.0: 初始版本，支持基本配置和运行功能
